## core

### key

1. 电梯只关心方向是否为0，订阅调度器，调度器来修改电梯方向和目标，发布调度器消息
2. 调度器关心是否有任务和电梯是否忙碌，订阅乘客行为和到达目标电梯
3. 未进入电梯乘客只关心楼层，是否满员，方向是否和自己一致
4. 进入电梯乘客只关心楼层
5. 进入电梯发布电梯消息
6. 离开电梯发布电梯消息
7. 更新楼层发布电梯消息
8. 更新方向发布电梯消息

### computed

elevator {id, counts, cur, direction, target}
task {id, cur, target, direction}

只考虑一台电梯

1. 乘客呼叫调度器，调度器尝试分配电梯，根据任务分配电梯
  * 电梯未运动，调度器发布消息
2. 电梯抵达目标（此时电梯里一定没人，不论是接人还是下人），根据电梯分配任务
  * 优先该方向更远或该点处有等待的人
  * 反方向最远或该点的人
  * 发布电梯消息，发布调度器消息
3. 乘客进出电梯发布电梯消息
